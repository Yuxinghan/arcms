<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.arcms.biz.dao.defined.shop.GoodsDAO" >
    <resultMap id="BaseResultMap" type="com.arcms.biz.domain.defined.shop.GoodsDO" >
        <id column="id" property="id" jdbcType="BIGINT" />
        <result column="gmt_created" property="gmtCreated" jdbcType="TIMESTAMP" />
        <result column="gmt_modified" property="gmtModified" jdbcType="TIMESTAMP" />
        <result column="created_by" property="createdBy" jdbcType="VARCHAR" />
        <result column="modified_by" property="modifiedBy" jdbcType="VARCHAR" />
        <result column="is_deleted" property="isDeleted" jdbcType="BIT" />
        <result column="seller_id" property="sellerId" jdbcType="BIGINT" />
        <result column="goods_id" property="goodsId" jdbcType="BIGINT" />
        <result column="title" property="title" jdbcType="VARCHAR" />
        <result column="cid" property="cid" jdbcType="BIGINT" />
        <result column="is_virtual" property="isVirtual" jdbcType="BIT" />
        <result column="list_time" property="listTime" jdbcType="TIMESTAMP" />
        <result column="delist_time" property="delistTime" jdbcType="TIMESTAMP" />
        <result column="expired_start_time" property="expiredStartTime" jdbcType="TIMESTAMP" />
        <result column="expired_end_time" property="expiredEndTime" jdbcType="TIMESTAMP" />
        <result column="status" property="status" jdbcType="VARCHAR" />
        <result column="quantity" property="quantity" jdbcType="BIGINT" />
        <result column="price" property="price" jdbcType="DECIMAL" />
        <result column="discount" property="discount" jdbcType="DECIMAL" />
        <result column="purchase_quantity" property="purchaseQuantity" jdbcType="BIGINT" />
        <result column="detail_url" property="detailUrl" jdbcType="VARCHAR" />
        <result column="qr_url" property="qrUrl" jdbcType="VARCHAR" />
        <result column="imgs_url" property="imgsUrl" jdbcType="VARCHAR" />
        <result column="thumbnail" property="thumbnail" jdbcType="VARCHAR" />
        <result column="skus" property="skus" jdbcType="VARCHAR" />
        <result column="props" property="props" jdbcType="VARCHAR" />
        <result column="props_name" property="propsName" jdbcType="VARCHAR" />
        <result column="version" property="version" jdbcType="BIGINT" />
        <result column="lng" property="lng" jdbcType="DECIMAL" />
        <result column="lat" property="lat" jdbcType="DECIMAL" />
    </resultMap>

    <select id="getTopHotGoods" resultMap="BaseResultMap" parameterType="java.lang.String">
      select
        g.*,
        s.lng,
        s.lat,
        s.geohash
      from
        goods g,
        seller s
      where
        g.seller_id = s.seller_id
        and s.geohash like '${geoHash}%'
        order by g.purchase_quantity desc
        limit 0,10
    </select>
</mapper>